{% extends "base.html" %}

{%block title %}
<title>OP-Z Sample Manager</title>
{%endblock%}

{% block main %}
<h1>Welcome to OP-Z All-in-One Sample Utility</h1>

<script>
    // make a request to "/get-opz-mount-path" to check if a mount path is set
    function checkMountPath() {
        fetch('/get-opz-mount-path')
            .then(response => response.json())
            .then(data => {
                if (data.OPZ_MOUNT_PATH && data.OPZ_MOUNT_PATH !== '') {
                    document.getElementById('mount-path-container').hidden = true;
                } else {
                    document.getElementById('mount-path').innerText = 'OP-Z mount path not set. Please select your OP-Z mount directory at the bottom.';
                }
            })
            .catch(error => {
                console.error('Error fetching mount path:', error);
                document.getElementById('mount-path').innerText = 'Error fetching mount path.';
            });
    }

    // Run on page load
    checkMountPath();

    // Run when window regains focus
    window.addEventListener('focus', checkMountPath);
</script>

<div id="mount-path-container" class="container">
    <p id="mount-path">Checking OP-Z mount path...</p>
</div>

<button onclick="window.location.href='/sampleconverter'" class="btn btn-primary">Sample Converter</button>

<button onclick="window.location.href='/samplemanager'" class="btn btn-primary">Sample Manager</button>

<button onclick="window.location.href='/configeditor'" class="btn btn-primary">Config Editor</button>

{% endblock %}

</html>